Here are **detailed notes on Jenkins Credentials Management**, including concepts, best practices, and secure usage in pipelines:

---

## 🔐 13. Jenkins Credentials Management – Detailed Notes

### ✅ What is Credentials Management in Jenkins?

Jenkins credentials management allows you to **securely store and manage secrets**, such as:

* GitHub access tokens
* SSH private keys
* AWS IAM credentials
* DockerHub credentials
* Database passwords
* API tokens

These secrets can then be used in Jenkins jobs or pipelines **without hardcoding them** into scripts.

---

### 🔑 Types of Credentials Jenkins Supports

| Type                              | Description                                    |
| --------------------------------- | ---------------------------------------------- |
| **Username and Password**         | For basic auth (e.g., DockerHub, GitHub)       |
| **SSH Username with Private Key** | For SSH-based Git access                       |
| **Secret Text**                   | Used for tokens, API keys                      |
| **Secret File**                   | Upload a file (e.g., service account JSON)     |
| **Certificate**                   | For SSL-based auth                             |
| **AWS Credentials**               | Stores AWS access key ID and secret access key |

---

### 📂 Credential Scopes

| Scope      | Visibility                                   |
| ---------- | -------------------------------------------- |
| **Global** | Available to all jobs                        |
| **System** | Internal use (not exposed to build jobs)     |
| **Folder** | Only jobs within a specific folder           |
| **Agent**  | Credentials available to specific agent only |

---

### 🔐 Storing Credentials Securely

1. Navigate to:
   `Jenkins > Manage Jenkins > Credentials > (Global or Folder scope)`

2. Choose credential type:
   `Username/Password`, `Secret Text`, `SSH Key`, etc.

3. Give each credential a **unique ID** (e.g., `github-token`, `dockerhub-creds`)

---

### 🔁 Using `credentialsId` in Pipelines

#### 📌 Example: Using GitHub Token (Secret Text)

```groovy
pipeline {
    agent any
    stages {
        stage('Clone Repo') {
            steps {
                withCredentials([string(credentialsId: 'github-token', variable: 'GIT_TOKEN')]) {
                    sh 'git clone https://$GIT_TOKEN@github.com/your/repo.git'
                }
            }
        }
    }
}
```

#### 📌 Example: SSH Key Access

```groovy
pipeline {
    agent any
    stages {
        stage('SSH Access') {
            steps {
                sshagent(['ssh-key-id']) {
                    sh 'ssh -o StrictHostKeyChecking=no user@host "uptime"'
                }
            }
        }
    }
}
```

#### 📌 Example: DockerHub Login

```groovy
pipeline {
    agent any
    stages {
        stage('Docker Login') {
            steps {
                withCredentials([usernamePassword(credentialsId: 'dockerhub-creds',
                                                 usernameVariable: 'DOCKER_USER',
                                                 passwordVariable: 'DOCKER_PASS')]) {
                    sh 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
                }
            }
        }
    }
}
```

---

### 🔒 Best Practices

* ❌ **Never hardcode secrets** in scripts or Groovy code
* ✅ **Use `withCredentials{}`** block to automatically mask secrets
* 🔄 Rotate secrets regularly (e.g., token expiration)
* 🛑 Limit scope (use folder-level creds where possible)
* 📜 Use descriptive `credentialsId` (like `aws-prod-creds`, `gitlab-ssh-key`)
* ✅ Enable **Audit Trail plugin** to track who accessed or modified credentials

---

### 📚 Jenkins Plugins for Credential Management

| Plugin                     | Use                                  |
| -------------------------- | ------------------------------------ |
| **Credentials Plugin**     | Core plugin for managing credentials |
| **SSH Agent Plugin**       | For SSH credential access            |
| **Docker Pipeline Plugin** | Uses DockerHub credentials           |
| **AWS Credentials Plugin** | AWS-specific integration             |
| **Mask Passwords Plugin**  | Masks passwords in logs              |

---

Let me know when you're ready, and I’ll provide:

* **Interview Questions + Answers**
* **Scenario-Based Q\&A**
  focused on Jenkins credential management.
